"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[245],{8245:(H,p,a)=>{a.r(p),a.d(p,{CitiesModule:()=>F});var d=a(6895),g=a(9455),v=a(5226),m=a.n(v),t=a(4650),Z=a(7241),T=a(5830),_=a(388),u=a(4006),C=a(8423),h=a(4333),f=a(502),b=a(4980);const y=["myModal3"];function A(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createCity())}),t._uU(1),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.hij(" ",e.util.translate("Save"),"")}}function x(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updateCity())}),t._uU(1),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.hij(" ",e.util.translate("Update"),"")}}function M(s,r){if(1&s&&(t.TgZ(0,"div",48)(1,"label"),t._uU(2),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.util.translate("No Data Found.."))}}function U(s,r){if(1&s&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA()()()),2&s){const e=t.oxw();t.xp6(3),t.Oqu(e.util.translate("Id")),t.xp6(2),t.Oqu(e.util.translate("City Name")),t.xp6(2),t.Oqu(e.util.translate("Action"))}}function q(s,r){1&s&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",49),t.qZA())}const w=function(){return[1,2,3,4]};function J(s,r){1&s&&(t.TgZ(0,"tr"),t.YNc(1,q,2,0,"td",28),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,w)))}function k(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"c-badge",50),t.NdJ("click",function(){const l=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.statusUpdate(l))}),t._uU(7),t.qZA(),t.TgZ(8,"c-badge",51),t.NdJ("click",function(){const l=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.updateInfo(l.id))}),t._uU(9),t.qZA(),t.TgZ(10,"c-badge",52),t.NdJ("click",function(){const l=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.deleteItem(l.id))}),t._uU(11),t.qZA()()()}if(2&s){const e=r.$implicit,i=t.oxw();t.xp6(2),t.hij("",e.id," "),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Tol(1==e.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==e.status?"success":"dark"),t.xp6(1),t.hij(" ",i.util.translate(1==e.status?"Active":"Deactived")," "),t.xp6(2),t.hij(" ",i.util.translate("Edit")," "),t.xp6(2),t.hij(" ",i.util.translate("Delete")," ")}}function E(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",53),t.NdJ("pageChange",function(n){t.CHM(e);const l=t.oxw();return t.KtG(l.page=n)}),t.qZA()()}}const c=function(){return{standalone:!0}},N=function(s){return{id:"pagin1",itemsPerPage:5,currentPage:s}},I=[{path:"",component:(()=>{class s{constructor(e,i){this.util=e,this.api=i,this.action="create",this.dummy=Array(10),this.cities=[],this.dummyCities=[],this.name="",this.status="-1",this.cityId="",this.lat="",this.lng="",this.page=1,this.resetChanges=()=>{this.cities=this.dummyCities},this.getAllCities()}openItem(e){throw new Error("Method not implemented.")}ngOnInit(){}getAllCities(){this.cities=[],this.dummy=Array(10),this.api.get_private("v1/cities/getAll").then(e=>{this.dummy=[],e&&e.status&&200==e.status&&e.success&&(console.log(">>>>>",e),e.data.length>0&&(this.cities=e.data,this.dummyCities=e.data,console.log("======",this.cities)))},e=>{this.dummy=[],console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.dummy=[],console.log("Err",e),this.util.apiErrorHandler(e)})}search(e){this.resetChanges(),console.log("string",e),this.cities=this.filterItems(e)}filterItems(e){return this.cities.filter(i=>i.name.toLowerCase().indexOf(e.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.cities=[],this.cities=this.dummyCities}deleteItem(e){m().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To delete this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(i=>{i&&i.value&&(console.log("update it"),console.log(e),console.log(e),this.util.show(),this.api.post_private("v1/cities/destroy",{id:e.id}).then(n=>{console.log(n),this.util.hide(),n&&n.status&&200==n.status&&this.getAllCities()}).catch(n=>{console.log(n),this.util.hide(),this.util.apiErrorHandler(n)}))})}statusUpdate(e){m().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To update this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(i=>{if(i&&i.value){console.log("update it"),this.cityId=e.id;const n={id:this.cityId,status:0==e.status?1:0};console.log("========",n),this.util.show(),this.api.post_private("v1/cities/update",n).then(l=>{this.util.hide(),console.log("+++++++++++++++",l),l&&l.status&&200==l.status&&l.success&&(this.util.success(this.util.translate("Status Updated !")),this.getAllCities())},l=>{this.util.hide(),console.log("Error",l),this.util.apiErrorHandler(l)}).catch(l=>{this.util.hide(),console.log("Err",l),this.util.apiErrorHandler(l)})}})}updateInfo(e){this.action="update",this.cityId=e;const i={id:this.cityId};console.log("CAT BY ID => ",i),this.util.show(),this.api.post_private("v1/cities/getById",i).then(n=>{console.log(n),this.util.hide(),n&&n.status&&200==n.status&&n.success&&(this.name=n.data.name,this.status=n.data.status,this.lat=n.data.lat,this.lng=n.data.lng)},n=>{this.util.hide(),console.log("Error",n),this.util.apiErrorHandler(n)}).catch(n=>{this.util.hide(),console.log("Err",n),this.util.apiErrorHandler(n)})}clearData(){console.log("CLEAR DATA"),this.name="",this.status="-1",this.lat="",this.lng=""}createCity(){if(""==this.name||"-1"==this.status||null==this.name||null==this.status||""==this.lat||""==this.lng||null==this.lat||null==this.lng)this.util.error(this.util.translate("All Fields are required"));else{const e={name:this.name,status:this.status,lat:this.lat,lng:this.lng};this.util.show(),this.api.post_private("v1/cities/create",e).then(i=>{console.log("+++++++++++++++",i),this.util.hide(),i&&i.status&&200==i.status&&i.success&&(this.clearData(),this.util.success(this.util.translate("City added !")),this.getAllCities())},i=>{this.util.hide(),console.log("Error",i),this.util.apiErrorHandler(i)}).catch(i=>{this.util.hide(),console.log("Err",i),this.util.apiErrorHandler(i)})}}updateCity(){if(""==this.name||"-1"==this.status||null==this.name||null==this.status||""==this.lat||""==this.lng||null==this.lat||null==this.lng)this.util.error(this.util.translate("All fields are required"));else{const e={id:this.cityId,name:this.name,status:this.status};console.log("========",e),this.util.show(),this.api.post_private("v1/cities/update",e).then(i=>{console.log("+++++++++++++++",i),this.util.hide(),i&&i.status&&200==i.status&&i.success&&(this.clearData(),this.util.success(this.util.translate("City Updated !")),this.action="create",this.getAllCities())},i=>{this.util.hide(),console.log("Error",i),this.util.apiErrorHandler(i)}).catch(i=>{this.util.hide(),console.log("Err",i),this.util.apiErrorHandler(i)})}}exportCSV(){let e=[];this.cities.forEach(n=>{const l={id:this.util.replaceWithDot(n.id),name:this.util.replaceWithDot(n.name),lat:this.util.replaceWithDot(n.lat),lng:this.util.replaceWithDot(n.lng),extra_field:this.util.replaceWithDot(n.extra_field),status:this.util.replaceWithDot(n.status)};e.push(l)}),this.util.downloadFile(e,"cities",["id","name","lat","lng","extra_field","status"])}importCSV(){this.myModal3.show()}saveType(){this.myModal3.hide()}uploadCSV(e){console.log("fle",e),0!=e.length&&null!=e[0].type.match(/text\/*/)&&(e?(console.log("ok"),this.util.show(),this.api.uploaCSV(e,"v1/cities/importData").subscribe(n=>{console.log("==>>>>>>",n.data),this.util.hide(),this.myModal3.hide(),this.util.success("Uploaded"),this.getAllCities()},n=>{console.log(n),this.util.hide(),this.util.apiErrorHandler(n)})):console.log("no"))}downloadSample(){window.open("assets/sample/cities.csv","_blank")}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(Z.f),t.Y36(T.s))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-cities"]],viewQuery:function(e,i){if(1&e&&t.Gf(y,5),2&e){let n;t.iGM(n=t.CRH())&&(i.myModal3=n.first)}},decls:84,vars:45,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group"],[1,"modal_lbl"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"text-heler"],["href","https://www.mapcoordinates.net/en","target","_blank","rel","noopener noreferrer",2,"color","blue !important"],[1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["value","-1"],["value","1"],["value","0"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","class","btn btn btn-primary",3,"click",4,"ngIf"],[1,"col-lg-8"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-warning",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"row","flex_row"],[1,"col-lg-12"],["type","text","id","name",1,"form-control",3,"placeholder","input"],["class","error_div",4,"ngIf"],[1,"table","table-responsive-sm","table-hover","mb-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal3","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"form-group","row"],[1,"col-md-12"],["type","file","id","file-input","name","file-input","accept",".csv",3,"change"],["type","button",1,"btn","btn-warning",2,"float","right",3,"click"],[1,"fa","fa-cloud-download"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn","btn-primary",3,"click"],[1,"error_div"],["count","1","appearance","line"],[3,"color","click"],["color","primary",1,"me-1","badge","bg-info",3,"click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"]],template:function(e,i){if(1&e){const n=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6)(8,"form")(9,"div",7)(10,"label",8),t._uU(11),t.qZA(),t.TgZ(12,"input",9),t.NdJ("ngModelChange",function(o){return i.name=o}),t.qZA()(),t.TgZ(13,"p",10),t._uU(14),t.TgZ(15,"a",11),t._uU(16,"https://www.mapcoordinates.net/en"),t.qZA()(),t.TgZ(17,"p",10),t._uU(18),t.qZA(),t.TgZ(19,"div",7)(20,"label",8),t._uU(21),t.qZA(),t.TgZ(22,"input",9),t.NdJ("ngModelChange",function(o){return i.lat=o}),t.qZA()(),t.TgZ(23,"div",7)(24,"label",8),t._uU(25),t.qZA(),t.TgZ(26,"input",9),t.NdJ("ngModelChange",function(o){return i.lng=o}),t.qZA()(),t.TgZ(27,"div",7)(28,"label",8),t._uU(29),t.qZA(),t.TgZ(30,"select",12),t.NdJ("ngModelChange",function(o){return i.status=o}),t.TgZ(31,"option",13),t._uU(32),t.qZA(),t.TgZ(33,"option",14),t._uU(34),t.qZA(),t.TgZ(35,"option",15),t._uU(36),t.qZA()()()(),t._UZ(37,"br"),t.YNc(38,A,2,1,"button",16),t.YNc(39,x,2,1,"button",17),t.qZA()()(),t.TgZ(40,"div",18)(41,"div",4)(42,"div",5),t._uU(43),t.TgZ(44,"div",19)(45,"button",20),t.NdJ("click",function(){return i.importCSV()}),t._uU(46),t.qZA(),t._uU(47," \xa0 "),t.TgZ(48,"button",21),t.NdJ("click",function(){return i.exportCSV()}),t._uU(49),t.qZA()()(),t.TgZ(50,"div",6)(51,"div",22)(52,"div",23)(53,"input",24),t.NdJ("input",function(o){return i.search(o.target.value)}),t.qZA()()(),t.YNc(54,M,3,1,"div",25),t.TgZ(55,"table",26),t.YNc(56,U,8,3,"thead",27),t.TgZ(57,"tbody"),t.YNc(58,J,2,2,"tr",28),t.YNc(59,k,12,8,"tr",28),t.ALo(60,"paginate"),t.qZA()(),t.YNc(61,E,2,0,"div",27),t.qZA()()()()(),t.TgZ(62,"div",29,30)(64,"div",31)(65,"div",32)(66,"div",33)(67,"h5",34),t._uU(68),t.qZA(),t.TgZ(69,"button",35),t.NdJ("click",function(){t.CHM(n);const o=t.MAs(63);return t.KtG(o.hide())}),t.TgZ(70,"span",36),t._uU(71,"\xd7"),t.qZA()()(),t.TgZ(72,"div",37)(73,"div",38)(74,"div",39)(75,"input",40),t.NdJ("change",function(o){return i.uploadCSV(o.target.files)}),t.qZA()()(),t.TgZ(76,"button",41),t.NdJ("click",function(){return i.downloadSample()}),t._uU(77),t._UZ(78,"i",42),t.qZA()(),t.TgZ(79,"div",43)(80,"button",44),t.NdJ("click",function(){t.CHM(n);const o=t.MAs(63);return t.KtG(o.hide())}),t._uU(81),t.qZA(),t.TgZ(82,"button",45),t.NdJ("click",function(){return i.saveType()}),t._uU(83),t.qZA()()()()()}2&e&&(t.xp6(6),t.hij(" ",i.util.translate("City Information")," "),t.xp6(5),t.Oqu(i.util.translate("City Name")),t.xp6(1),t.Q6J("ngModel",i.name)("placeholder",i.util.translate("City Name"))("ngModelOptions",t.DdM(39,c)),t.xp6(2),t.hij("",i.util.translate("Select Latitude & Longitude From here:")," "),t.xp6(4),t.hij(" ",i.util.translate("Please enter valid Latitude & Longitude")," "),t.xp6(3),t.Oqu(i.util.translate("Latitude")),t.xp6(1),t.Q6J("ngModel",i.lat)("placeholder",i.util.translate("Latitude"))("ngModelOptions",t.DdM(40,c)),t.xp6(3),t.Oqu(i.util.translate("Longitude")),t.xp6(1),t.Q6J("ngModel",i.lng)("placeholder",i.util.translate("Longitude"))("ngModelOptions",t.DdM(41,c)),t.xp6(3),t.Oqu(i.util.translate("City Status")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(42,c))("ngModel",i.status),t.xp6(2),t.Oqu(i.util.translate("Select Status")),t.xp6(2),t.Oqu(i.util.translate("Active")),t.xp6(2),t.Oqu(i.util.translate("Deactive")),t.xp6(2),t.Q6J("ngIf","create"==i.action),t.xp6(1),t.Q6J("ngIf","update"==i.action),t.xp6(4),t.hij(" ",i.util.translate("All Cities")," "),t.xp6(3),t.hij(" ",i.util.translate("Bulk CSV Upload")," "),t.xp6(3),t.hij(" ",i.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",i.util.translate("Search City")),t.xp6(1),t.Q6J("ngIf",(null==i.cities?null:i.cities.length)<=0&&(null==i.dummy?null:i.dummy.length)<=0),t.xp6(2),t.Q6J("ngIf",(null==i.cities?null:i.cities.length)>0),t.xp6(2),t.Q6J("ngForOf",i.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(60,36,i.cities,t.VKq(43,N,i.page))),t.xp6(2),t.Q6J("ngIf",(null==i.cities?null:i.cities.length)>0),t.xp6(7),t.hij("",i.util.translate("Bulk CSV Upload")," "),t.xp6(9),t.hij(" ",i.util.translate("Download Sample CSV")," \xa0 "),t.xp6(4),t.Oqu(i.util.translate("Close")),t.xp6(2),t.hij(" ",i.util.translate("Save Changes"),""))},dependencies:[d.sg,d.O5,_.oB,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.On,u.F,C.Ro,h.LS,f.xr,b.FN3,h._s],styles:['@charset "UTF-8";']}),s})()}];let O=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.Bz.forChild(I),g.Bz]}),s})();var S=a(9241),D=a(835);let F=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.ez,O,_.zk.forRoot(),u.u5,C.ef,h.JX,f.hx.forRoot({animation:"progress-dark"}),S.P4.forRoot(),D.Fq.forRoot(),b.TXv]}),s})()}}]);