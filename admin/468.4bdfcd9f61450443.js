"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[468],{4468:(j,d,r)=>{r.r(d),r.d(d,{CategoriesModule:()=>O});var c=r(6895),h=r(9455),v=r(5226),p=r.n(v),t=r(4650),b=r(7241),y=r(5830),m=r(388),u=r(4006),_=r(8423),g=r(4333),C=r(502);const Z=["myModal3"];function T(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.createCategory())}),t._uU(1),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("Save"),"")}}function A(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.updateCategory())}),t._uU(1),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("Update"),"")}}function x(n,a){if(1&n&&(t.TgZ(0,"div",51)(1,"label"),t._uU(2),t.qZA()()),2&n){const i=t.oxw();t.xp6(2),t.Oqu(i.util.translate("No Data Found.."))}}function U(n,a){if(1&n&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.util.translate("Id")),t.xp6(2),t.Oqu(i.util.translate("Cover")),t.xp6(2),t.Oqu(i.util.translate("Category Name")),t.xp6(2),t.Oqu(i.util.translate("Action"))}}function M(n,a){1&n&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",52),t.qZA())}const q=function(){return[1,2,3,4]};function k(n,a){1&n&&(t.TgZ(0,"tr"),t.YNc(1,M,2,0,"td",31),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,q)))}function w(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"img",53),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"c-badge",54),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.statusUpdate(s))}),t._uU(9),t.qZA(),t.TgZ(10,"c-badge",55),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.updateInfo(s.id))}),t._uU(11),t.qZA(),t.TgZ(12,"c-badge",56),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.deleteItem(s))}),t._uU(13),t.qZA()()()}if(2&n){const i=a.$implicit,e=t.oxw();t.xp6(2),t.hij("",i.id," "),t.xp6(2),t.Q6J("src",e.api.imageUrl+i.cover,t.LSH),t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Tol(1==i.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==i.status?"success":"dark"),t.xp6(1),t.hij(" ",e.util.translate(1==i.status?"Active":"Deactived")," "),t.xp6(2),t.hij(" ",e.util.translate("Edit")," "),t.xp6(2),t.hij(" ",e.util.translate("Delete")," ")}}function J(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",57),t.NdJ("pageChange",function(o){t.CHM(i);const s=t.oxw();return t.KtG(s.page=o)}),t.qZA()()}}const f=function(){return{standalone:!0}},E=function(n){return{id:"pagin1",itemsPerPage:5,currentPage:n}},N=[{path:"",component:(()=>{class n{constructor(i,e){this.util=i,this.api=e,this.action="create",this.dummy=Array(10),this.list=[],this.dummyList=[],this.name="",this.status="-1",this.cover="",this.page=1,this.cateId="",this.resetChanges=()=>{this.list=this.dummyList},this.getAll()}ngOnInit(){}getAll(){this.list=[],this.dummy=Array(10),this.api.get_private("v1/category/getAll").then(i=>{this.dummy=[],i&&i.status&&200==i.status&&i.success&&(console.log(">>>>>",i),i.data.length>0&&(this.list=i.data,this.dummyList=i.data,console.log("======",this.list)))},i=>{this.dummy=[],console.log("Error",i),this.util.apiErrorHandler(i)}).catch(i=>{this.dummy=[],console.log("Err",i),this.util.apiErrorHandler(i)})}search(i){this.resetChanges(),console.log("string",i),this.list=this.filterItems(i)}filterItems(i){return this.list.filter(e=>e.name.toLowerCase().indexOf(i.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.list=[],this.list=this.dummyList}deleteItem(i){p().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To delete this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(e=>{e&&e.value&&(console.log("update it"),console.log(i),console.log(i),this.util.show(),this.api.post_private("v1/category/destroy",{id:i.id}).then(o=>{console.log(o),this.util.hide(),o&&o.status&&200==o.status&&this.getAll()}).catch(o=>{console.log(o),this.util.hide(),this.util.apiErrorHandler(o)}))})}preview_banner(i){console.log("fle",i),0!=i.length&&null!=i[0].type.match(/image\/*/)&&(i?(console.log("ok"),this.util.show(),this.api.uploadFile(i).subscribe(o=>{console.log("==>>>>>>",o.data),this.util.hide(),o&&o.data.image_name&&(this.cover=o.data.image_name)},o=>{console.log(o),this.util.hide()})):console.log("no"))}statusUpdate(i){p().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To update this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(e=>{if(e&&e.value){console.log("update it"),this.cateId=i.id;const o={id:this.cateId,status:0==i.status?1:0};console.log("========",o),this.util.show(),this.api.post_private("v1/category/update",o).then(s=>{this.util.hide(),console.log("+++++++++++++++",s),s&&s.status&&200==s.status&&s.success&&(this.util.success(this.util.translate("Status Updated !")),this.getAll())},s=>{this.util.hide(),console.log("Error",s),this.util.apiErrorHandler(s)}).catch(s=>{this.util.hide(),console.log("Err",s),this.util.apiErrorHandler(s)})}})}updateInfo(i){this.action="update",this.cateId=i;const e={id:this.cateId};console.log("CAT BY ID => ",e),this.util.show(),this.api.post_private("v1/category/getById",e).then(o=>{console.log(o),this.util.hide(),o&&o.status&&200==o.status&&o.success&&(this.name=o.data.name,this.status=o.data.status,this.cover=o.data.cover)},o=>{this.util.hide(),console.log("Error",o),this.util.apiErrorHandler(o)}).catch(o=>{this.util.hide(),console.log("Err",o),this.util.apiErrorHandler(o)})}clearData(){console.log("CLEAR DATA"),this.cover="",this.name="",this.status="-1"}createCategory(){if(""==this.name||"-1"==this.status||null==this.name||null==this.status||""==this.cover)this.util.error(this.util.translate("All Fields are required"));else{const i={name:this.name,status:this.status,cover:this.cover};this.util.show(),this.api.post_private("v1/category/create",i).then(e=>{console.log("+++++++++++++++",e),this.util.hide(),e&&e.status&&200==e.status&&e.success&&(this.clearData(),this.util.success(this.util.translate("Added !")),this.getAll())},e=>{this.util.hide(),console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.util.hide(),console.log("Err",e),this.util.apiErrorHandler(e)})}}updateCategory(){if(""==this.name||"-1"==this.status||null==this.name||null==this.status||""==this.cover)this.util.error(this.util.translate("All fields are required"));else{const i={id:this.cateId,name:this.name,status:this.status,cover:this.cover};console.log("========",i),this.util.show(),this.api.post_private("v1/category/update",i).then(e=>{console.log("+++++++++++++++",e),this.util.hide(),e&&e.status&&200==e.status&&e.success&&(this.clearData(),this.util.success(this.util.translate("Updated !")),this.action="create",this.getAll())},e=>{this.util.hide(),console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.util.hide(),console.log("Err",e),this.util.apiErrorHandler(e)})}}exportCSV(){let i=[];this.list.forEach(o=>{const s={id:this.util.replaceWithDot(o.id),name:this.util.replaceWithDot(o.name),cover:this.util.replaceWithDot(o.cover),extra_field:this.util.replaceWithDot(o.extra_field),status:this.util.replaceWithDot(o.status)};i.push(s)}),this.util.downloadFile(i,"categories",["id","name","cover","extra_field","status"])}importCSV(){this.myModal3.show()}saveType(){this.myModal3.hide()}uploadCSV(i){console.log("fle",i),0!=i.length&&null!=i[0].type.match(/text\/*/)&&(i?(console.log("ok"),this.util.show(),this.api.uploaCSV(i,"v1/category/importData").subscribe(o=>{console.log("==>>>>>>",o.data),this.util.hide(),this.myModal3.hide(),this.util.success("Uploaded"),this.getAll()},o=>{console.log(o),this.util.hide(),this.util.apiErrorHandler(o)})):console.log("no"))}downloadSample(){window.open("assets/sample/category.csv","_blank")}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(b.f),t.Y36(y.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-categories"]],viewQuery:function(i,e){if(1&i&&t.Gf(Z,5),2&i){let o;t.iGM(o=t.CRH())&&(e.myModal3=o.first)}},decls:78,vars:36,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"logoContainer"],["onError","this.src='assets/img/dummy.jpeg'",3,"src"],[1,"fileContainer","sprite"],["type","file","value","Choose File",3,"change"],[1,"text-heler"],[1,"form-group"],[1,"modal_lbl"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["value","-1"],["value","1"],["value","0"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","class","btn btn btn-primary",3,"click",4,"ngIf"],[1,"col-lg-8"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-warning",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"row","flex_row"],[1,"col-lg-12"],["type","text","id","name",1,"form-control",3,"placeholder","input"],["class","error_div",4,"ngIf"],[1,"table","table-responsive-sm","table-hover","mb-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal3","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"form-group","row"],[1,"col-md-12"],["type","file","id","file-input","name","file-input","accept",".csv",3,"change"],["type","button",1,"btn","btn-warning",2,"float","right",3,"click"],[1,"fa","fa-cloud-download"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn","btn-primary",3,"click"],[1,"error_div"],["count","1","appearance","line"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","40px","width","40px","object-fit","cover",3,"src"],[3,"color","click"],["color","info",1,"me-1","badge","bg-info",3,"click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6)(8,"div",7),t._UZ(9,"img",8),t.qZA(),t.TgZ(10,"div",9)(11,"span"),t._uU(12),t.qZA(),t.TgZ(13,"input",10),t.NdJ("change",function(l){return e.preview_banner(l.target.files)}),t.qZA()(),t.TgZ(14,"p",11),t._uU(15),t.qZA(),t.TgZ(16,"form")(17,"div",12)(18,"label",13),t._uU(19),t.qZA(),t.TgZ(20,"input",14),t.NdJ("ngModelChange",function(l){return e.name=l}),t.qZA()(),t.TgZ(21,"div",12)(22,"label",13),t._uU(23),t.qZA(),t.TgZ(24,"select",15),t.NdJ("ngModelChange",function(l){return e.status=l}),t.TgZ(25,"option",16),t._uU(26),t.qZA(),t.TgZ(27,"option",17),t._uU(28),t.qZA(),t.TgZ(29,"option",18),t._uU(30),t.qZA()()()(),t._UZ(31,"br"),t.YNc(32,T,2,1,"button",19),t.YNc(33,A,2,1,"button",20),t.qZA()()(),t.TgZ(34,"div",21)(35,"div",4)(36,"div",5),t._uU(37),t.TgZ(38,"div",22)(39,"button",23),t.NdJ("click",function(){return e.importCSV()}),t._uU(40),t.qZA(),t._uU(41," \xa0 "),t.TgZ(42,"button",24),t.NdJ("click",function(){return e.exportCSV()}),t._uU(43),t.qZA()()(),t.TgZ(44,"div",6)(45,"div",25)(46,"div",26)(47,"input",27),t.NdJ("input",function(l){return e.search(l.target.value)}),t.qZA()()(),t.YNc(48,x,3,1,"div",28),t.TgZ(49,"table",29),t.YNc(50,U,10,4,"thead",30),t.TgZ(51,"tbody"),t.YNc(52,k,2,2,"tr",31),t.YNc(53,w,14,9,"tr",31),t.ALo(54,"paginate"),t.qZA()(),t.YNc(55,J,2,0,"div",30),t.qZA()()()()(),t.TgZ(56,"div",32,33)(58,"div",34)(59,"div",35)(60,"div",36)(61,"h5",37),t._uU(62),t.qZA(),t.TgZ(63,"button",38),t.NdJ("click",function(){t.CHM(o);const l=t.MAs(57);return t.KtG(l.hide())}),t.TgZ(64,"span",39),t._uU(65,"\xd7"),t.qZA()()(),t.TgZ(66,"div",40)(67,"div",41)(68,"div",42)(69,"input",43),t.NdJ("change",function(l){return e.uploadCSV(l.target.files)}),t.qZA()()(),t.TgZ(70,"button",44),t.NdJ("click",function(){return e.downloadSample()}),t._uU(71),t._UZ(72,"i",45),t.qZA()(),t.TgZ(73,"div",46)(74,"button",47),t.NdJ("click",function(){t.CHM(o);const l=t.MAs(57);return t.KtG(l.hide())}),t._uU(75),t.qZA(),t.TgZ(76,"button",48),t.NdJ("click",function(){return e.saveType()}),t._uU(77),t.qZA()()()()()}2&i&&(t.xp6(6),t.hij(" ",e.util.translate("Category Information")," "),t.xp6(3),t.Q6J("src",e.api.imageUrl+e.cover,t.LSH),t.xp6(3),t.hij(" ",e.util.translate("Add Cover")," "),t.xp6(3),t.hij(" ",e.util.translate(".jpg, .jpeg, .png, .bmp recommended size (512 X 512) pixels")," "),t.xp6(4),t.Oqu(e.util.translate("Category Name")),t.xp6(1),t.Q6J("ngModel",e.name)("placeholder",e.util.translate("Category Name"))("ngModelOptions",t.DdM(32,f)),t.xp6(3),t.Oqu(e.util.translate("Category Status")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(33,f))("ngModel",e.status),t.xp6(2),t.Oqu(e.util.translate("Select Status")),t.xp6(2),t.Oqu(e.util.translate("Active")),t.xp6(2),t.Oqu(e.util.translate("Deactive")),t.xp6(2),t.Q6J("ngIf","create"==e.action),t.xp6(1),t.Q6J("ngIf","update"==e.action),t.xp6(4),t.hij(" ",e.util.translate("All Categories")," "),t.xp6(3),t.hij(" ",e.util.translate("Bulk CSV Upload")," "),t.xp6(3),t.hij(" ",e.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",e.util.translate("Search Category")),t.xp6(1),t.Q6J("ngIf",(null==e.list?null:e.list.length)<=0&&(null==e.dummy?null:e.dummy.length)<=0),t.xp6(2),t.Q6J("ngIf",(null==e.list?null:e.list.length)>0),t.xp6(2),t.Q6J("ngForOf",e.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(54,29,e.list,t.VKq(34,E,e.page))),t.xp6(2),t.Q6J("ngIf",(null==e.list?null:e.list.length)>0),t.xp6(7),t.hij("",e.util.translate("Bulk CSV Upload")," "),t.xp6(9),t.hij(" ",e.util.translate("Download Sample CSV")," \xa0 "),t.xp6(4),t.Oqu(e.util.translate("Close")),t.xp6(2),t.hij(" ",e.util.translate("Save Changes"),""))},dependencies:[c.sg,c.O5,m.oB,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.On,u.F,_.Ro,g.LS,C.xr,g._s],styles:['@charset "UTF-8";']}),n})()}];let I=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(N),h.Bz]}),n})();var S=r(9241);let O=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,I,m.zk.forRoot(),u.u5,_.ef,g.JX,C.hx.forRoot({animation:"progress-dark"}),S.P4.forRoot()]}),n})()}}]);