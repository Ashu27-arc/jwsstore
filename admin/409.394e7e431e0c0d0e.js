"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[409],{6409:(U,m,o)=>{o.r(m),o.d(m,{DriverRequestModule:()=>M});var c=o(6895),p=o(9455),_=o(5439),t=o(4650),f=o(7241),Z=o(5830),u=o(4006),h=o(502),d=o(4333),g=o(388),v=o(8423);const C=["myModal"];function y(s,l){1&s&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",31),t.qZA())}const q=function(){return[1,2,3,4,5,6,7,8,9,10]};function b(s,l){1&s&&(t.TgZ(0,"tr"),t.YNc(1,y,2,0,"td",13),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,q)))}function T(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",32),t.qZA(),t.TgZ(3,"td")(4,"label")(5,"span",33),t._uU(6),t.qZA(),t._UZ(7,"br"),t.qZA()(),t.TgZ(8,"td")(9,"label"),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"label"),t._uU(13),t.qZA()(),t.TgZ(14,"td")(15,"label"),t._uU(16),t.qZA()(),t.TgZ(17,"td")(18,"label"),t._uU(19),t.qZA()(),t.TgZ(20,"td")(21,"c-badge",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.accept(r))}),t._uU(22),t.qZA(),t.TgZ(23,"c-badge",35),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.reject(r))}),t._uU(24),t.qZA()()()}if(2&s){const e=l.$implicit,i=t.oxw();t.xp6(2),t.Q6J("src",i.api.imageUrl+e.cover,t.LSH),t.xp6(4),t.hij(" ",e.first_name+" "+e.last_name,""),t.xp6(4),t.hij(" ",e.city_name," "),t.xp6(3),t.hij(" ",e.address," "),t.xp6(3),t.hij(" ",i.util.translate(1==e.gender?"Male":"Female")," "),t.xp6(3),t.hij(" ",e.country_code+e.mobile," "),t.xp6(3),t.hij(" ",i.util.translate("Accept")," "),t.xp6(2),t.hij(" ",i.util.translate("Reject")," ")}}function x(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",36),t.NdJ("pageChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.page=n)}),t.qZA()()}}const R=function(s){return{id:"pagin1",itemsPerPage:10,currentPage:s}},A=[{path:"",component:(()=>{class s{constructor(e,i){this.util=e,this.api=i,this.dummy=[],this.list=[],this.dummyList=[],this.page=1,this.appId="",this.message="",this.resetChanges=()=>{this.list=this.dummyList},this.ckeConfig={height:300,language:"en",allowedContent:!0,toolbar:[{name:"editing",items:["Scayt","Find","Replace","SelectAll"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["Maximize","ShowBlocks","Preview","Print","Templates"]},{name:"document",items:["Source"]},{name:"insert",items:["Image","Table","HorizontalRule","SpecialChar","Iframe","imageExplorer"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","CreateDiv","-","Blockquote"]},{name:"justify",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"styles",items:["Styles","Format","FontSize","-","TextColor","BGColor"]}]},this.getStores()}ngOnInit(){}getStores(){this.dummy=Array(5),this.list=[],this.dummyList=[],this.api.get_private("v1/driver_request/getNewRequest").then(e=>{console.log(e),this.dummy=[],e&&e.status&&200==e.status&&e.data&&e.data.length&&(this.list=e.data,this.dummyList=e.data,console.log(Object.keys(this.list[0])))},e=>{console.log(e),this.dummy=[],this.util.apiErrorHandler(e)}).catch(e=>{console.log(e),this.dummy=[],this.util.apiErrorHandler(e)})}exportCSV(){let e=[];this.list.forEach(n=>{const r={id:this.util.replaceWithDot(n.id),name:this.util.replaceWithDot(n.first_name)+" "+this.util.replaceWithDot(n.last_name),city_name:this.util.replaceWithDot(n.city_name),address:this.util.replaceWithDot(n.address)};e.push(r)}),this.util.downloadFile(e,"drivers",["id","name","city_name","address"])}search(e){this.resetChanges(),console.log("string",e),this.list=this.filterItems(e)}filterItems(e){return this.list.filter(i=>i.name.toLowerCase().indexOf(e.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.list=[],this.list=this.dummyList}getTime(e){return _("1997-07-15 "+e).format("hh:mm A")}accept(e){console.log(e),this.appId=e.id;const i={id:this.appId,subject:this.util.translate("Your application is accepted"),status:1};console.log(i),this.util.show(),this.api.post_private("v1/driver_request/acceptRequest",i).then(n=>{console.log(n),this.util.hide(),n&&n.status&&200==n.status&&n.data&&this.getStores()},n=>{console.log(n),this.util.hide(),this.util.apiErrorHandler(n)}).catch(n=>{console.log(n),this.util.hide(),this.util.apiErrorHandler(n)})}reject(e){console.log(e),console.log("update it"),this.appId=e.id,this.myModal.show()}onReject(){if(""==this.message||null==this.message)return this.util.error("Please enter message"),!1;const e={id:this.appId,subject:this.util.translate("Your application is rejected"),status:1,message:this.message};console.log(e),this.util.show(),this.api.post_private("v1/driver_request/rejectRequest",e).then(i=>{console.log(i),this.util.hide(),i&&i.status&&200==i.status&&i.data&&(this.getStores(),this.message="",this.myModal.hide())},i=>{console.log(i),this.util.hide(),this.util.apiErrorHandler(i)}).catch(i=>{console.log(i),this.util.hide(),this.util.apiErrorHandler(i)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(f.f),t.Y36(Z.s))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-driver-request"]],viewQuery:function(e,i){if(1&e&&t.Gf(C,5),2&e){let n;t.iGM(n=t.CRH())&&(i.myModal=n.first)}},decls:57,vars:24,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],[1,"col-lg-12"],["type","text","id","name",1,"form-control","form-control",3,"placeholder","input"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],["for","text-input",1,"col-form-label"],["type","text","rows","10","id","text-input","name","text-input",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["animation","progress"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","40px","width","40px","object-fit","cover",3,"src"],[2,"font-size","14px"],["color","success",1,"me-1","badge","bg-success",3,"click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"]],template:function(e,i){if(1&e){const n=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return i.exportCSV()}),t._uU(9),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"input",11),t.NdJ("input",function(a){return i.search(a.target.value)}),t.qZA()()(),t.TgZ(14,"table",12)(15,"thead")(16,"tr")(17,"th"),t._uU(18),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,b,2,2,"tr",13),t.YNc(33,T,25,8,"tr",13),t.ALo(34,"paginate"),t.qZA()(),t.YNc(35,x,2,0,"div",14),t.qZA()()()()(),t.TgZ(36,"div",15,16)(38,"div",17)(39,"div",18)(40,"div",19)(41,"h5",20),t._uU(42),t.qZA(),t.TgZ(43,"button",21),t.NdJ("click",function(){t.CHM(n);const a=t.MAs(37);return t.KtG(a.hide())}),t.TgZ(44,"span",22),t._uU(45,"\xd7"),t.qZA()()(),t.TgZ(46,"div",23)(47,"div",24)(48,"div",25)(49,"label",26),t._uU(50),t.qZA(),t.TgZ(51,"textarea",27),t.NdJ("ngModelChange",function(a){return i.message=a}),t.qZA()()()(),t.TgZ(52,"div",28)(53,"button",29),t.NdJ("click",function(){t.CHM(n);const a=t.MAs(37);return t.KtG(a.hide())}),t._uU(54),t.qZA(),t.TgZ(55,"button",30),t.NdJ("click",function(){return i.onReject()}),t._uU(56),t.qZA()()()()()}2&e&&(t.xp6(6),t.hij(" ",i.util.translate("Drivers Request")," "),t.xp6(3),t.hij(" ",i.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",i.util.translate("Search Drivers")),t.xp6(5),t.hij(" ",i.util.translate("Cover"),""),t.xp6(2),t.hij(" ",i.util.translate("Name"),""),t.xp6(2),t.hij(" ",i.util.translate("City")," "),t.xp6(2),t.hij(" ",i.util.translate("Address")," "),t.xp6(2),t.hij(" ",i.util.translate("Gender")," "),t.xp6(2),t.hij(" ",i.util.translate("Mobile")," "),t.xp6(2),t.hij(" ",i.util.translate("Actions")," "),t.xp6(2),t.Q6J("ngForOf",i.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(34,19,i.list,t.VKq(22,R,i.page))),t.xp6(2),t.Q6J("ngIf",(null==i.list?null:i.list.length)>0),t.xp6(7),t.hij("",i.util.translate("Reject Application")," "),t.xp6(8),t.hij("",i.util.translate("Message")," "),t.xp6(1),t.Q6J("placeholder",i.util.translate("Message"))("ngModel",i.message),t.xp6(3),t.Oqu(i.util.translate("Close")),t.xp6(2),t.hij(" ",i.util.translate("Save Changes"),""))},dependencies:[c.sg,c.O5,u.Fj,u.JJ,u.On,h.xr,d.LS,g.oB,v.Ro,d._s],styles:['@charset "UTF-8";']}),s})()}];let j=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.Bz.forChild(A),p.Bz]}),s})();var D=o(6442);let M=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.ez,j,u.u5,h.hx,d.JX,g.zk.forRoot(),v.ef,D.dF]}),s})()}}]);