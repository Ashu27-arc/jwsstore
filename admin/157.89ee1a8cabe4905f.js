"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[157],{2157:(D,p,l)=>{l.r(p),l.d(p,{AdministrantorModule:()=>E});var c=l(6895),m=l(9455),C=l(5226),g=l.n(C),t=l(4650),v=l(5830),Z=l(7241),_=l(388),d=l(4006),f=l(8423),A=l(502),h=l(4333);const b=["myModal2"],T=["myModal3"];function y(s,a){if(1&s&&(t.TgZ(0,"div",35)(1,"p"),t._uU(2),t.qZA()()),2&s){const n=t.oxw();t.xp6(2),t.Oqu(n.util.translate("No Data Found.."))}}function M(s,a){if(1&s&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.qZA()()()),2&s){const n=t.oxw();t.xp6(3),t.Oqu(n.util.translate("Cover")),t.xp6(2),t.Oqu(n.util.translate("Name")),t.xp6(2),t.Oqu(n.util.translate("Mobile")),t.xp6(2),t.Oqu(n.util.translate("Email")),t.xp6(2),t.Oqu(n.util.translate("Action"))}}function x(s,a){1&s&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",36),t.qZA())}const q=function(){return[1,2,3,4,5]};function U(s,a){1&s&&(t.TgZ(0,"tr"),t.YNc(1,x,2,0,"td",16),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,q)))}function w(s,a){if(1&s){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",37),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"c-badge",38),t.NdJ("click",function(){const r=t.CHM(n).$implicit,o=t.oxw();return t.KtG(o.statusUpdate(r))}),t._uU(11),t.qZA(),t.TgZ(12,"c-badge",39),t.NdJ("click",function(){const r=t.CHM(n).$implicit,o=t.oxw();return t.KtG(o.deleteItem(r))}),t._uU(13),t.qZA()()()}if(2&s){const n=a.$implicit,e=t.oxw();t.xp6(2),t.Q6J("src",e.api.imageUrl+n.cover,t.LSH),t.xp6(2),t.AsE("",n.first_name," ",n.last_name,""),t.xp6(2),t.Oqu(n.country_code+" "+n.mobile),t.xp6(2),t.Oqu(n.email),t.xp6(2),t.Tol(1==n.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==n.status?"success":"dark"),t.xp6(1),t.hij(" ",e.util.translate(1==n.status?"Active":"Deactived")," "),t.xp6(2),t.hij(" ",e.util.translate("Delete")," ")}}function J(s,a){if(1&s){const n=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",40),t.NdJ("pageChange",function(i){t.CHM(n);const r=t.oxw();return t.KtG(r.page=i)}),t.qZA()()}}const N=function(s){return{id:"pagin1",itemsPerPage:10,currentPage:s}},u=function(){return{standalone:!0}},O=[{path:"",component:(()=>{class s{constructor(n,e,i){this.router=n,this.api=e,this.util=i,this.dummy=Array(10),this.dummyUsers=[],this.users=[],this.page=1,this.first_name="",this.last_name="",this.email="",this.password="",this.mobile="",this.country_code="",this.resetChanges=()=>{this.users=this.dummyUsers},this.getAllUsers()}ngOnInit(){}getAllUsers(){this.api.get_private("v1/users/admins").then(n=>{this.dummy=[],n&&n.status&&200==n.status&&n.success&&(console.log(">>>>>",n),n&&n.data.length>0&&(this.users=n.data,this.dummyUsers=n.data,console.log("======",this.users)))},n=>{this.dummy=[],console.log("Error",n),this.util.apiErrorHandler(n)}).catch(n=>{this.dummy=[],console.log("Err",n),this.util.apiErrorHandler(n)})}search(n){this.resetChanges(),console.log("string",n),this.users=this.filterItems(n)}filterItems(n){return this.users.filter(e=>(e.first_name+" "+e.last_name).toLowerCase().indexOf(n.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.users=[],this.users=this.dummyUsers}getClass(n){return"1"==n||1==n?"badge badge-success":"0"==n||0==n?"badge badge-danger":"badge badge-warning"}statusUpdate(n){console.log(n);const e=1==n.status?"Deactive":"Active";g().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To")+" "+this.util.translate(e)+" "+this.util.translate("this user!"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(i=>{i&&i.value&&(console.log("update it"),n.status=1==n.status?0:1,this.util.success("Updated"),this.util.show(),this.api.post_private("v1/profile/update",n).then(o=>{this.util.hide(),this.util.success("Updated")},o=>{this.util.hide(),console.log("Error",o),this.util.apiErrorHandler(o)}).catch(o=>{this.util.hide(),console.log("Err",o),this.util.apiErrorHandler(o)}))})}viewsInfo(n){console.log(n),this.router.navigate(["manage-users"],{queryParams:{id:n}})}deleteItem(n){console.log(n),g().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To Delete this user!"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(e=>{e&&e.value&&(console.log("update it"),this.util.show(),this.api.post_private("v1/users/deleteUser",n).then(i=>{this.util.hide(),this.util.success("Deleted"),this.getAllUsers()},i=>{this.util.hide(),console.log("Error",i),this.util.apiErrorHandler(i)}).catch(i=>{this.util.hide(),console.log("Err",i),this.util.apiErrorHandler(i)}))})}addNew(){this.myModal2.show()}exportCSV(){let n=[];this.users.forEach(i=>{const r={id:this.util.replaceWithDot(i.id),first_name:this.util.replaceWithDot(i.first_name),last_name:this.util.replaceWithDot(i.last_name),cover:this.util.replaceWithDot(i.cover),country_code:this.util.replaceWithDot(i.country_code),mobile:this.util.replaceWithDot(i.mobile),email:this.util.replaceWithDot(i.email)};n.push(r)}),this.util.downloadFile(n,"administrator",["id","first_name","last_name","cover","country_code","mobile","email"])}saveType(){this.myModal3.hide()}saveChanges(){if(""==this.first_name||""==this.last_name||null==this.first_name||null==this.last_name||""==this.email||null==this.email||""==this.password||null==this.password||""==this.country_code||null==this.country_code||""==this.mobile||null==this.mobile)return this.util.error(this.util.translate("All Fields are required")),!1;const n={first_name:this.first_name,last_name:this.last_name,email:this.email,password:this.password,country_code:this.country_code,mobile:this.mobile};this.util.show(),this.api.post_private("v1/users/adminNewAdmin",n).then(e=>{if(this.util.hide(),console.log(e),500==e.status&&this.util.error(e.message),e&&e.status&&200==e.status&&e.user&&e.user.id)this.util.success(this.util.translate("Account created successfully")),console.log(e),this.myModal2.hide(),this.getAllUsers();else if(e&&e.error&&e.error.msg)this.util.error(e.error.msg);else if(e&&e.error&&"Validation Error."==e.error.message)for(let i in e.error[0])console.log(e.error[0][i][0]),this.util.error(e.error[0][i][0]);else this.util.error(this.util.translate("Something went wrong"))},e=>{if(console.log(e),this.util.hide(),e&&e.error&&500==e.error.status&&e.error.message)this.util.error(e.error.message);else if(e&&e.error&&e.error.error&&422==e.error.status)for(let i in e.error.error)console.log(e.error.error[i][0]),this.util.error(e.error.error[i][0]);else this.util.error(this.util.translate("Something went wrong"))}).catch(e=>{if(console.log(e),this.util.hide(),e&&e.error&&500==e.error.status&&e.error.message)this.util.error(e.error.message);else if(e&&e.error&&e.error.error&&422==e.error.status)for(let i in e.error.error)console.log(e.error.error[i][0]),this.util.error(e.error.error[i][0]);else this.util.error(this.util.translate("Something went wrong"))})}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(m.F0),t.Y36(v.s),t.Y36(Z.f))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-administrantor"]],viewQuery:function(n,e){if(1&n&&(t.Gf(b,5),t.Gf(T,5)),2&n){let i;t.iGM(i=t.CRH())&&(e.myModal2=i.first),t.iGM(i=t.CRH())&&(e.myModal3=i.first)}},decls:72,vars:47,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-primary",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],[1,"col-lg-6"],["type","text","id","name",1,"form-control","form-control-lg",3,"placeholder","input"],["style","text-align: center;",4,"ngIf"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal2","bs-modal"],["role","document",1,"modal-dialog","modal-danger","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"col-sm-6"],[1,"form-group"],["type","text",1,"form-control",3,"ngModelOptions","ngModel","placeholder","ngModelChange"],["type","email",1,"form-control",3,"ngModelOptions","ngModel","placeholder","ngModelChange"],[1,"col-sm-4"],[1,"col-sm-8"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[2,"text-align","center"],["count","1","appearance","line"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","80px","width","80px","object-fit","cover",3,"src"],[3,"color","click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"]],template:function(n,e){if(1&n){const i=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return e.addNew()}),t._uU(9),t.qZA(),t._uU(10," \xa0 "),t.TgZ(11,"button",8),t.NdJ("click",function(){return e.exportCSV()}),t._uU(12),t.qZA()()(),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"input",12),t.NdJ("input",function(o){return e.search(o.target.value)}),t.qZA()()(),t.YNc(17,y,3,1,"div",13),t.TgZ(18,"table",14),t.YNc(19,M,12,5,"thead",15),t.TgZ(20,"tbody"),t.YNc(21,U,2,2,"tr",16),t.YNc(22,w,14,10,"tr",16),t.ALo(23,"paginate"),t.qZA()(),t.YNc(24,J,2,0,"div",15),t.qZA()()()()(),t.TgZ(25,"div",17,18)(27,"div",19)(28,"div",20)(29,"div",21)(30,"h5",22),t._uU(31),t.qZA(),t.TgZ(32,"button",23),t.NdJ("click",function(){t.CHM(i);const o=t.MAs(26);return t.KtG(o.hide())}),t.TgZ(33,"span",24),t._uU(34,"\xd7"),t.qZA()()(),t.TgZ(35,"div",25)(36,"div",2)(37,"div",26)(38,"div",27)(39,"label"),t._uU(40),t.qZA(),t.TgZ(41,"input",28),t.NdJ("ngModelChange",function(o){return e.first_name=o}),t.qZA()()(),t.TgZ(42,"div",26)(43,"div",27)(44,"label"),t._uU(45),t.qZA(),t.TgZ(46,"input",28),t.NdJ("ngModelChange",function(o){return e.last_name=o}),t.qZA()()(),t.TgZ(47,"div",26)(48,"div",27)(49,"label"),t._uU(50),t.qZA(),t.TgZ(51,"input",29),t.NdJ("ngModelChange",function(o){return e.email=o}),t.qZA()()(),t.TgZ(52,"div",26)(53,"div",27)(54,"label"),t._uU(55),t.qZA(),t.TgZ(56,"input",28),t.NdJ("ngModelChange",function(o){return e.password=o}),t.qZA()()(),t.TgZ(57,"div",30)(58,"div",27)(59,"label"),t._uU(60),t.qZA(),t.TgZ(61,"input",28),t.NdJ("ngModelChange",function(o){return e.country_code=o}),t.qZA()()(),t.TgZ(62,"div",31)(63,"div",27)(64,"label"),t._uU(65),t.qZA(),t.TgZ(66,"input",28),t.NdJ("ngModelChange",function(o){return e.mobile=o}),t.qZA()()()()(),t.TgZ(67,"div",32)(68,"button",33),t.NdJ("click",function(){t.CHM(i);const o=t.MAs(26);return t.KtG(o.hide())}),t._uU(69),t.qZA(),t.TgZ(70,"button",34),t.NdJ("click",function(){return e.saveChanges()}),t._uU(71),t.qZA()()()()()}2&n&&(t.xp6(6),t.hij(" ",e.util.translate("All Administrator")," "),t.xp6(3),t.hij(" ",e.util.translate("Add New")," "),t.xp6(3),t.hij(" ",e.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",e.util.translate("Search administrator")),t.xp6(1),t.Q6J("ngIf",!(null!=e.users&&e.users.length)&&0==e.dummy.length),t.xp6(2),t.Q6J("ngIf",null==e.users?null:e.users.length),t.xp6(2),t.Q6J("ngForOf",e.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(23,36,e.users,t.VKq(39,N,e.page))),t.xp6(2),t.Q6J("ngIf",(null==e.users?null:e.users.length)>0),t.xp6(7),t.hij("",e.util.translate("Create New Admin")," "),t.xp6(9),t.Oqu(e.util.translate("First Name")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(41,u))("ngModel",e.first_name)("placeholder",e.util.translate("First Name")),t.xp6(4),t.Oqu(e.util.translate("Last Name")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(42,u))("ngModel",e.last_name)("placeholder",e.util.translate("Last Name")),t.xp6(4),t.Oqu(e.util.translate("Email")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(43,u))("ngModel",e.email)("placeholder",e.util.translate("Email")),t.xp6(4),t.Oqu(e.util.translate("Password")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(44,u))("ngModel",e.password)("placeholder",e.util.translate("Password")),t.xp6(4),t.Oqu(e.util.translate("Country Code")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(45,u))("ngModel",e.country_code)("placeholder",e.util.translate("Country Code")),t.xp6(4),t.Oqu(e.util.translate("Mobile")),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(46,u))("ngModel",e.mobile)("placeholder",e.util.translate("Mobile")),t.xp6(3),t.Oqu(e.util.translate("Close")),t.xp6(2),t.hij(" ",e.util.translate("Save Changes"),""))},dependencies:[c.sg,c.O5,_.oB,d.Fj,d.JJ,d.On,f.Ro,A.xr,h.LS,h._s],styles:['@charset "UTF-8";']}),s})()}];let k=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[m.Bz.forChild(O),m.Bz]}),s})(),E=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.ez,k,_.zk.forRoot(),d.u5,f.ef,A.hx.forRoot({animation:"progress-dark"}),h.JX]}),s})()}}]);