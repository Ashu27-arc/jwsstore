"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[567],{6567:(N,d,l)=>{l.r(d),l.d(d,{ManageLanguagesModule:()=>C});var c=l(6895),p=l(9455),m=l(2340),t=l(4650),v=l(5830),M=l(7241),h=l(4006),f=l(8423);function b(i,g){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",18)(4,"input",19),t.NdJ("ngModelChange",function(e){const u=t.CHM(n).$implicit;return t.KtG(u.value=e)}),t.qZA()()()}if(2&i){const n=g.$implicit;t.xp6(2),t.Oqu(n.key),t.xp6(2),t.Q6J("ngModel",n.value)}}function y(i,g){if(1&i){const n=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.create())}),t._uU(1),t.qZA()}if(2&i){const n=t.oxw();t.xp6(1),t.hij(" ",n.util.translate("Add Language")," ")}}function _(i,g){if(1&i){const n=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.update())}),t._uU(1),t.qZA()}if(2&i){const n=t.oxw();t.xp6(1),t.hij(" ",n.util.translate("Update Language")," ")}}const L=[{path:"",component:(()=>{class i{constructor(n,a,e,s,u){this.api=n,this.route=a,this.util=e,this.chMod=s,this.location=u,this.name="",this.status="active",this.coverImage="",this.fileURL="",this.position=1,this.languagesJSON=[],this.page=1,this.savedFiles=[],this.api.getLanguageJson().then(o=>{if(o){let r=Object.entries(o).map(([O,T])=>({key:O,value:T}));this.languagesJSON=r}console.log("====",this.languagesJSON)}).catch(o=>{console.log(o)}),this.route.queryParams.subscribe(o=>{console.log(o),o&&o.id?(this.id=o.id,this.edit=!0,this.getById()):this.edit=!1})}getById(){const n={id:this.id};this.util.show(),this.api.post_private("v1/languages/getById",n).then(a=>{if(this.util.hide(),console.log("response",a),a&&a.data){const e=a.data;if(this.fileURL=e.cover,this.name=e.name,this.id=e.id,this.coverImage=m.N.imageUrl+e.cover,this.position=e.positions,(s=>{try{return JSON.parse(s),!0}catch{return!1}})(e.content)){const s=JSON.parse(e.content),u=Object.entries(s).map(([o,r])=>({key:o,value:r}));for(let o=0;o<this.languagesJSON.length;o++)for(let r=0;r<u.length;r++)this.languagesJSON[o].key&&u[r].key&&this.languagesJSON[o].key==u[r].key&&(this.languagesJSON[o].value=u[r].value)}}},a=>{this.util.hide(),console.log("Error",a),this.util.apiErrorHandler(a)}).catch(a=>{this.util.hide(),console.log("Err",a),this.util.apiErrorHandler(a)})}ngOnInit(){}preview_banner(n){console.log("fle",n),0!=n.length&&null!=n[0].type.match(/image\/*/)&&(n?(console.log("ok"),this.util.show(),this.api.uploadFile(n).subscribe(e=>{console.log("==>>",e),this.util.hide(),e&&e.data.image_name&&(this.fileURL=e.data.image_name,this.coverImage=m.N.imageUrl+e.data.image_name)},e=>{console.log(e),this.util.hide()})):console.log("no"))}create(){const n=this.languagesJSON.reduce(function(e,s){return e[s.key]=s.value,e},{});if(console.log(n),!this.name||""==this.name||""==this.coverImage||!this.coverImage)return!1;const a={cover:this.fileURL,status:1,name:this.name,positions:this.position,content:JSON.stringify(n)};console.log("ok",a),this.util.show(),this.api.post_private("v1/languages/create",a).then(e=>{this.util.hide(),console.log(e),this.util.success(this.util.translate("Language added !")),this.location.back()},e=>{this.util.hide(),console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.util.hide(),console.log("Err",e),this.util.apiErrorHandler(e)})}update(){const n=this.languagesJSON.reduce(function(e,s){return e[s.key]=s.value,e},{});if(console.log(n),!this.name||""==this.name||""==this.coverImage||!this.coverImage)return!1;const a={cover:this.fileURL,name:this.name,id:this.id,positions:this.position,content:JSON.stringify(n)};console.log("ok",a),this.util.show(),this.api.post_private("v1/languages/update",a).then(e=>{this.util.hide(),console.log(e),this.util.success(this.util.translate("Language updated !")),this.location.back()},e=>{this.util.hide(),console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.util.hide(),console.log("Err",e),this.util.apiErrorHandler(e)})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(v.s),t.Y36(p.gz),t.Y36(M.f),t.Y36(t.sBO),t.Y36(c.Ye))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-manage-languages"]],decls:30,vars:11,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group","row"],[1,"col-lg-4","col-form-label"],[1,"col-lg-4"],["type","file","accept","image/*",1,"form-control","file_ip",3,"change"],["alt","","onError","this.src='assets/img/dummy.jpeg'",2,"height","100px","width","100px","float","right","object-fit","contain",3,"src"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","class","btn btn btn-primary",3,"click",4,"ngIf"],["width","50%"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn","btn-primary",3,"click"]],template:function(n,a){1&n&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6)(8,"div",7)(9,"label"),t._uU(10),t.qZA(),t.TgZ(11,"input",8),t.NdJ("ngModelChange",function(s){return a.name=s}),t.qZA()(),t.TgZ(12,"div",9)(13,"label",10),t._uU(14),t.qZA(),t.TgZ(15,"div",11)(16,"input",12),t.NdJ("change",function(s){return a.preview_banner(s.target.files)}),t.qZA()(),t.TgZ(17,"div",11),t._UZ(18,"img",13),t.qZA()(),t.TgZ(19,"table",14)(20,"thead")(21,"tr")(22,"th"),t._uU(23),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,b,5,2,"tr",15),t.qZA()(),t.YNc(28,y,2,1,"button",16),t.YNc(29,_,2,1,"button",17),t.qZA()()()()()),2&n&&(t.xp6(6),t.hij(" ",a.util.translate("Manage Languages")," "),t.xp6(4),t.Oqu(a.util.translate("Language Name")),t.xp6(1),t.Q6J("ngModel",a.name)("placeholder",a.util.translate("Language Name")),t.xp6(3),t.Oqu(a.util.translate("Image Upload")),t.xp6(4),t.Q6J("src",a.coverImage,t.LSH),t.xp6(5),t.Oqu(a.util.translate("Translation Key")),t.xp6(2),t.Oqu(a.util.translate("Translation Value")),t.xp6(2),t.Q6J("ngForOf",a.languagesJSON),t.xp6(1),t.Q6J("ngIf",!a.edit),t.xp6(1),t.Q6J("ngIf",a.edit))},dependencies:[c.sg,c.O5,h.Fj,h.JJ,h.On,f.Ro],styles:['@charset "UTF-8";']}),i})()}];let J=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(L),p.Bz]}),i})();var Z=l(388);let C=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.ez,J,Z.zk.forRoot(),h.u5,f.ef]}),i})()}}]);