"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[859],{6859:(N,p,r)=>{r.r(p),r.d(p,{UsersModule:()=>E});var u=r(6895),c=r(9455),f=r(5226),h=r.n(f),t=r(4650),U=r(5830),v=r(7241),g=r(388),m=r(8423),_=r(502),d=r(4333);const C=["myModal3"];function b(n,a){if(1&n&&(t.TgZ(0,"div",34)(1,"p"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.util.translate("No Data Found.."))}}function x(n,a){if(1&n&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.util.translate("Cover")),t.xp6(2),t.Oqu(e.util.translate("Name")),t.xp6(2),t.Oqu(e.util.translate("Mobile")),t.xp6(2),t.Oqu(e.util.translate("Email")),t.xp6(2),t.Oqu(e.util.translate("Action"))}}function T(n,a){1&n&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",35),t.qZA())}const Z=function(){return[1,2,3,4,5]};function y(n,a){1&n&&(t.TgZ(0,"tr"),t.YNc(1,T,2,0,"td",16),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,Z)))}function A(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",36),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"c-badge",37),t.NdJ("click",function(){const l=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.statusUpdate(l))}),t._uU(11),t.qZA(),t.TgZ(12,"c-badge",38),t.NdJ("click",function(){const l=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.viewsInfo(l.id))}),t._uU(13),t.qZA(),t.TgZ(14,"c-badge",39),t.NdJ("click",function(){const l=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.deleteItem(l))}),t._uU(15),t.qZA()()()}if(2&n){const e=a.$implicit,s=t.oxw();t.xp6(2),t.Q6J("src",s.api.imageUrl+e.cover,t.LSH),t.xp6(2),t.AsE("",e.first_name," ",e.last_name,""),t.xp6(2),t.Oqu(e.country_code+" "+e.mobile),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Tol(1==e.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==e.status?"success":"dark"),t.xp6(1),t.hij(" ",s.util.translate(1==e.status?"Active":"Deactived")," "),t.xp6(2),t.hij(" ",s.util.translate("View")," "),t.xp6(2),t.hij(" ",s.util.translate("Delete")," ")}}function w(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",40),t.NdJ("pageChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.page=i)}),t.qZA()()}}const k=function(n){return{id:"pagin1",itemsPerPage:10,currentPage:n}},q=[{path:"",component:(()=>{class n{constructor(e,s,i){this.router=e,this.api=s,this.util=i,this.dummy=Array(10),this.dummyUsers=[],this.users=[],this.page=1,this.resetChanges=()=>{this.users=this.dummyUsers},this.getAllUsers()}ngOnInit(){}getAllUsers(){this.api.get_private("v1/users/getAll").then(e=>{this.dummy=[],e&&e.status&&200==e.status&&e.success&&(console.log(">>>>>",e),e&&e.data.length>0&&(this.users=e.data,this.dummyUsers=e.data,console.log("======",this.users)))},e=>{this.dummy=[],console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.dummy=[],console.log("Err",e),this.util.apiErrorHandler(e)})}search(e){this.resetChanges(),console.log("string",e),this.users=this.filterItems(e)}filterItems(e){return this.users.filter(s=>(s.first_name+" "+s.last_name).toLowerCase().indexOf(e.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.users=[],this.users=this.dummyUsers}getClass(e){return"1"==e||1==e?"badge badge-success":"0"==e||0==e?"badge badge-danger":"badge badge-warning"}statusUpdate(e){console.log(e);const s=1==e.status?"Deactive":"Active";h().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To")+" "+this.util.translate(s)+" "+this.util.translate("this user!"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(i=>{i&&i.value&&(console.log("update it"),e.status=1==e.status?0:1,this.util.show(),this.api.post_private("v1/profile/update",e).then(o=>{this.util.hide(),this.util.success("Updated")},o=>{this.util.hide(),console.log("Error",o),this.util.apiErrorHandler(o)}).catch(o=>{this.util.hide(),console.log("Err",o),this.util.apiErrorHandler(o)}))})}viewsInfo(e){console.log(e),this.router.navigate(["manage-users"],{queryParams:{id:e}})}deleteItem(e){console.log(e),h().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To Delete this user!"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(s=>{s&&s.value&&(console.log("update it"),this.util.show(),this.api.post_private("v1/users/deleteUser",e).then(i=>{this.util.hide(),this.util.success("Deleted"),this.getAllUsers()},i=>{this.util.hide(),console.log("Error",i),this.util.apiErrorHandler(i)}).catch(i=>{this.util.hide(),console.log("Err",i),this.util.apiErrorHandler(i)}))})}addNew(){}exportCSV(){let e=[];this.users.forEach(i=>{const l={id:this.util.replaceWithDot(i.id),first_name:this.util.replaceWithDot(i.first_name),last_name:this.util.replaceWithDot(i.last_name),cover:this.util.replaceWithDot(i.cover),country_code:this.util.replaceWithDot(i.country_code),mobile:this.util.replaceWithDot(i.mobile),email:this.util.replaceWithDot(i.email)};e.push(l)}),this.util.downloadFile(e,"users",["id","first_name","last_name","cover","country_code","mobile","email"])}saveType(){this.myModal3.hide()}uploadCSV(e){console.log("fle",e),0!=e.length&&null!=e[0].type.match(/text\/*/)&&(e?(console.log("ok"),this.util.show(),this.api.uploaCSV(e,"v1/users/importData").subscribe(i=>{console.log("==>>>>>>",i.data),this.util.hide(),this.myModal3.hide(),this.util.success("Uploaded"),this.getAllUsers()},i=>{console.log(i),this.util.hide(),this.util.apiErrorHandler(i)})):console.log("no"))}importCSV(){this.myModal3.show()}downloadSample(){window.open("assets/sample/users.csv","_blank")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.F0),t.Y36(U.s),t.Y36(v.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-users"]],viewQuery:function(e,s){if(1&e&&t.Gf(C,5),2&e){let i;t.iGM(i=t.CRH())&&(s.myModal3=i.first)}},decls:47,vars:18,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-warning",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],[1,"col-lg-6"],["type","text","id","name",1,"form-control","form-control-lg",3,"placeholder","input"],["style","text-align: center;",4,"ngIf"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal3","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"form-group","row"],[1,"col-md-12"],["type","file","id","file-input","name","file-input","accept",".csv",3,"change"],["type","button",1,"btn","btn-warning",2,"float","right",3,"click"],[1,"fa","fa-cloud-download"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],[2,"text-align","center"],["count","1","appearance","line"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","80px","width","80px","object-fit","cover",3,"src"],[3,"color","click"],["color","primary",1,"me-1","badge","bg-info",3,"click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"]],template:function(e,s){if(1&e){const i=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return s.importCSV()}),t._uU(9),t.qZA(),t._uU(10," \xa0 "),t.TgZ(11,"button",8),t.NdJ("click",function(){return s.exportCSV()}),t._uU(12),t.qZA()()(),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"input",12),t.NdJ("input",function(o){return s.search(o.target.value)}),t.qZA()()(),t.YNc(17,b,3,1,"div",13),t.TgZ(18,"table",14),t.YNc(19,x,12,5,"thead",15),t.TgZ(20,"tbody"),t.YNc(21,y,2,2,"tr",16),t.YNc(22,A,16,11,"tr",16),t.ALo(23,"paginate"),t.qZA()(),t.YNc(24,w,2,0,"div",15),t.qZA()()()()(),t.TgZ(25,"div",17,18)(27,"div",19)(28,"div",20)(29,"div",21)(30,"h5",22),t._uU(31),t.qZA(),t.TgZ(32,"button",23),t.NdJ("click",function(){t.CHM(i);const o=t.MAs(26);return t.KtG(o.hide())}),t.TgZ(33,"span",24),t._uU(34,"\xd7"),t.qZA()()(),t.TgZ(35,"div",25)(36,"div",26)(37,"div",27)(38,"input",28),t.NdJ("change",function(o){return s.uploadCSV(o.target.files)}),t.qZA()()(),t.TgZ(39,"button",29),t.NdJ("click",function(){return s.downloadSample()}),t._uU(40),t._UZ(41,"i",30),t.qZA()(),t.TgZ(42,"div",31)(43,"button",32),t.NdJ("click",function(){t.CHM(i);const o=t.MAs(26);return t.KtG(o.hide())}),t._uU(44),t.qZA(),t.TgZ(45,"button",33),t.NdJ("click",function(){return s.saveType()}),t._uU(46),t.qZA()()()()()}2&e&&(t.xp6(6),t.hij(" ",s.util.translate("All Users")," "),t.xp6(3),t.hij(" ",s.util.translate("Bulk CSV Upload")," "),t.xp6(3),t.hij(" ",s.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",s.util.translate("Search User")),t.xp6(1),t.Q6J("ngIf",!(null!=s.users&&s.users.length)&&0==s.dummy.length),t.xp6(2),t.Q6J("ngIf",null==s.users?null:s.users.length),t.xp6(2),t.Q6J("ngForOf",s.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(23,13,s.users,t.VKq(16,k,s.page))),t.xp6(2),t.Q6J("ngIf",(null==s.users?null:s.users.length)>0),t.xp6(7),t.hij("",s.util.translate("Bulk CSV Upload")," "),t.xp6(9),t.hij(" ",s.util.translate("Download Sample CSV")," \xa0 "),t.xp6(4),t.Oqu(s.util.translate("Close")),t.xp6(2),t.hij(" ",s.util.translate("Save Changes"),""))},dependencies:[u.sg,u.O5,g.oB,m.Ro,_.xr,d.LS,d._s],styles:['@charset "UTF-8";']}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(q),c.Bz]}),n})();var J=r(4006);let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,M,g.zk.forRoot(),J.u5,m.ef,_.hx.forRoot({animation:"progress-dark"}),d.JX]}),n})()}}]);