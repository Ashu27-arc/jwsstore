"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[774],{8774:(j,p,l)=>{l.r(p),l.d(p,{ProductsModule:()=>S});var c=l(6895),u=l(9455),m=l(5226),_=l.n(m),t=l(4650),f=l(7241),Z=l(5830),h=l(502),d=l(4333),g=l(388);const C=["myModal3"];function b(s,r){1&s&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",32),t.qZA())}const v=function(){return[1,2,3,4,5,6,7,8,9,10]};function T(s,r){1&s&&(t.TgZ(0,"tr"),t.YNc(1,b,2,0,"td",13),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,v)))}function y(s,r){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const i=t.oxw().$implicit;t.xp6(1),t.hij(" $",i.sell_price," ")}}function x(s,r){if(1&s){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",33),t.qZA(),t.TgZ(3,"td")(4,"label")(5,"span",34),t._uU(6),t.qZA(),t._UZ(7,"br"),t.qZA()(),t.TgZ(8,"td")(9,"label")(10,"span"),t._uU(11),t.qZA(),t.YNc(12,y,2,1,"span",14),t.qZA()(),t.TgZ(13,"td")(14,"label"),t._uU(15),t.qZA()(),t.TgZ(16,"td")(17,"label"),t._uU(18),t.qZA()(),t.TgZ(19,"td")(20,"c-badge",35),t.NdJ("click",function(){const n=t.CHM(i).$implicit,a=t.oxw();return t.KtG(a.inHome(n))}),t._uU(21),t.qZA()(),t.TgZ(22,"td")(23,"c-badge",35),t.NdJ("click",function(){const n=t.CHM(i).$implicit,a=t.oxw();return t.KtG(a.inOffers(n))}),t._uU(24),t.qZA()(),t.TgZ(25,"td")(26,"c-badge",35),t.NdJ("click",function(){const n=t.CHM(i).$implicit,a=t.oxw();return t.KtG(a.changeStatus(n))}),t._uU(27),t.qZA()()()}if(2&s){const i=r.$implicit,e=t.oxw();t.xp6(2),t.Q6J("src",e.api.imageUrl+i.cover,t.LSH),t.xp6(4),t.hij(" ",i.name,""),t.xp6(4),t.Tol(i.discount>0&&i.sell_price>0?"stroke":""),t.xp6(1),t.hij("$",i.original_price,""),t.xp6(1),t.Q6J("ngIf",i.discount>0&&i.sell_price>0),t.xp6(3),t.hij(" ",1==i.in_stoke||"1"==i.in_stoke?"Yes":"Out Of Stock"," "),t.xp6(3),t.AsE(" ",i.rating," / (",i.total_rating,") "),t.xp6(2),t.Tol(1==i.in_home?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==i.in_home?"success":"dark"),t.xp6(1),t.hij(" ",e.util.translate(1==i.in_home?"Yes":"No")," "),t.xp6(2),t.Tol(1==i.in_offer?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==i.in_offer?"success":"dark"),t.xp6(1),t.hij(" ",e.util.translate(1==i.in_offer?"Yes":"No")," "),t.xp6(2),t.Tol(1==i.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==i.status?"success":"dark"),t.xp6(1),t.hij(" ",e.util.translate(1==i.status?"Active":"Deactived")," ")}}function A(s,r){if(1&s){const i=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",36),t.NdJ("pageChange",function(o){t.CHM(i);const n=t.oxw();return t.KtG(n.page=o)}),t.qZA()()}}const k=function(s){return{id:"pagin1",itemsPerPage:10,currentPage:s}},U=[{path:"",component:(()=>{class s{constructor(i,e,o){this.util=i,this.api=e,this.router=o,this.dummy=[],this.list=[],this.dummyList=[],this.page=1,this.cities=[],this.selectedCities="",this.resetChanges=()=>{this.list=this.dummyList},this.getList()}getList(){this.dummy=Array(5),this.list=[],this.dummyList=[],this.api.get_private("v1/products/getAll").then(i=>{console.log(i),this.dummy=[],i&&i.status&&200==i.status&&i.data&&i.data.length&&(this.list=i.data,this.dummyList=i.data,console.log(Object.keys(this.list[0])))},i=>{console.log(i),this.dummy=[],this.util.apiErrorHandler(i)}).catch(i=>{console.log(i),this.dummy=[],this.util.apiErrorHandler(i)})}ngOnInit(){}changeStatus(i){console.log(i),_().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To update this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(e=>{if(e&&e.value){console.log("update it");const o={id:i.id,status:0==i.status?1:0};console.log("========",o),this.util.show(),this.api.post_private("v1/products/updateStatus",o).then(n=>{this.util.hide(),console.log("+++++++++++++++",n),n&&n.status&&200==n.status&&n.success&&(this.util.success(this.util.translate("Status Updated !")),this.getList())},n=>{this.util.hide(),console.log("Error",n),this.util.apiErrorHandler(n)}).catch(n=>{this.util.hide(),console.log("Err",n),this.util.apiErrorHandler(n)})}})}search(i){this.resetChanges(),console.log("string",i),this.list=this.filterItems(i)}inHome(i){const e={id:i.id,in_home:0==i.in_home?1:0};console.log("========",e),this.util.show(),this.api.post_private("v1/products/updateHome",e).then(o=>{this.util.hide(),console.log("+++++++++++++++",o),o&&o.status&&200==o.status&&o.success&&(this.util.success(this.util.translate("Status Updated !")),this.getList())},o=>{this.util.hide(),console.log("Error",o),this.util.apiErrorHandler(o)}).catch(o=>{this.util.hide(),console.log("Err",o),this.util.apiErrorHandler(o)})}inOffers(i){const e={id:i.id,in_offer:0==i.in_offer?1:0};console.log("========",e),this.util.show(),this.api.post_private("v1/products/updateOffers",e).then(o=>{this.util.hide(),console.log("+++++++++++++++",o),o&&o.status&&200==o.status&&o.success&&(this.util.success(this.util.translate("Status Updated !")),this.getList())},o=>{this.util.hide(),console.log("Error",o),this.util.apiErrorHandler(o)}).catch(o=>{this.util.hide(),console.log("Err",o),this.util.apiErrorHandler(o)})}filterItems(i){return this.list.filter(e=>e.name.toLowerCase().indexOf(i.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.list=[],this.list=this.dummyList}addNew(){this.router.navigate(["manage-store"])}exportCSV(){let i=[];this.list.forEach(o=>{const n={id:this.util.replaceWithDot(o.id),name:this.util.replaceWithDot(o.name),cover:this.util.replaceWithDot(o.cover),original_price:this.util.replaceWithDot(o.original_price),sell_price:this.util.replaceWithDot(o.sell_price),certificate_url:this.util.replaceWithDot(o.certificate_url),in_stoke:this.util.replaceWithDot(o.in_stoke),rating:this.util.replaceWithDot(o.rating),total_rating:this.util.replaceWithDot(o.total_rating),in_home:this.util.replaceWithDot(o.in_home),in_offer:this.util.replaceWithDot(o.in_offer)};i.push(n)}),this.util.downloadFile(i,"products",["id","name","cover","original_price","sell_price","in_stoke","rating","total_rating","in_home","in_offer"])}filter(){console.log(this.selectedCities),this.list=this.dummyList.filter(i=>i.cid==this.selectedCities)}clearFilter(){this.selectedCities="",this.list=this.dummyList}saveType(){this.myModal3.hide()}uploadCSV(i){console.log("fle",i),0!=i.length&&null!=i[0].type.match(/text\/*/)&&(i?(console.log("ok"),this.util.show(),this.api.uploaCSV(i,"v1/products/importData").subscribe(o=>{console.log("==>>>>>>",o.data),this.util.hide(),this.myModal3.hide(),this.util.success("Uploaded"),this.getList()},o=>{console.log(o),this.util.hide(),this.util.apiErrorHandler(o)})):console.log("no"))}importCSV(){this.myModal3.show()}downloadSample(){window.open("assets/sample/products.csv","_blank")}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(f.f),t.Y36(Z.s),t.Y36(u.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-products"]],viewQuery:function(i,e){if(1&i&&t.Gf(C,5),2&i){let o;t.iGM(o=t.CRH())&&(e.myModal3=o.first)}},decls:62,vars:24,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-warning",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],[1,"col-lg-8"],["type","text","id","name",1,"form-control","form-control",3,"placeholder","input"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal3","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"form-group","row"],[1,"col-md-12"],["type","file","id","file-input","name","file-input","accept",".csv",3,"change"],["type","button",1,"btn","btn-warning",2,"float","right",3,"click"],[1,"fa","fa-cloud-download"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["animation","progress"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","40px","width","40px","object-fit","cover",3,"src"],[2,"font-size","14px"],[3,"color","click"],["id","pagin1",3,"pageChange"]],template:function(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return e.importCSV()}),t._uU(8),t.qZA(),t._uU(9," \xa0 "),t.TgZ(10,"button",7),t.NdJ("click",function(){return e.exportCSV()}),t._uU(11),t.qZA()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"input",11),t.NdJ("input",function(a){return e.search(a.target.value)}),t.qZA()()(),t.TgZ(16,"table",12)(17,"thead")(18,"tr")(19,"th"),t._uU(20),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.qZA()()(),t.TgZ(35,"tbody"),t.YNc(36,T,2,2,"tr",13),t.YNc(37,x,28,21,"tr",13),t.ALo(38,"paginate"),t.qZA()(),t.YNc(39,A,2,0,"div",14),t.qZA()()()()(),t.TgZ(40,"div",15,16)(42,"div",17)(43,"div",18)(44,"div",19)(45,"h5",20),t._uU(46),t.qZA(),t.TgZ(47,"button",21),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(41);return t.KtG(a.hide())}),t.TgZ(48,"span",22),t._uU(49,"\xd7"),t.qZA()()(),t.TgZ(50,"div",23)(51,"div",24)(52,"div",25)(53,"input",26),t.NdJ("change",function(a){return e.uploadCSV(a.target.files)}),t.qZA()()(),t.TgZ(54,"button",27),t.NdJ("click",function(){return e.downloadSample()}),t._uU(55),t._UZ(56,"i",28),t.qZA()(),t.TgZ(57,"div",29)(58,"button",30),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(41);return t.KtG(a.hide())}),t._uU(59),t.qZA(),t.TgZ(60,"button",31),t.NdJ("click",function(){return e.saveType()}),t._uU(61),t.qZA()()()()()}2&i&&(t.xp6(5),t.hij(" ",e.util.translate("Products")," "),t.xp6(3),t.hij(" ",e.util.translate("Bulk CSV Upload")," "),t.xp6(3),t.hij(" ",e.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",e.util.translate("Search products")),t.xp6(5),t.hij(" ",e.util.translate("Cover"),""),t.xp6(2),t.hij(" ",e.util.translate("Name"),""),t.xp6(2),t.hij(" ",e.util.translate("Price")," "),t.xp6(2),t.hij(" ",e.util.translate("In Stock")," "),t.xp6(2),t.hij(" ",e.util.translate("Rating")," "),t.xp6(2),t.hij(" ",e.util.translate("Show In Home")," "),t.xp6(2),t.hij(" ",e.util.translate("In Offers")," "),t.xp6(2),t.hij(" ",e.util.translate("Actions")," "),t.xp6(2),t.Q6J("ngForOf",e.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(38,19,e.list,t.VKq(22,k,e.page))),t.xp6(2),t.Q6J("ngIf",(null==e.list?null:e.list.length)>0),t.xp6(7),t.hij("",e.util.translate("Bulk CSV Upload")," "),t.xp6(9),t.hij(" ",e.util.translate("Download Sample CSV")," \xa0 "),t.xp6(4),t.Oqu(e.util.translate("Close")),t.xp6(2),t.hij(" ",e.util.translate("Save Changes"),""))},dependencies:[c.sg,c.O5,h.xr,d.LS,g.oB,d._s],styles:['@charset "UTF-8";']}),s})()}];let P=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[u.Bz.forChild(U),u.Bz]}),s})();var w=l(4006);let S=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.ez,P,w.u5,h.hx,d.JX,g.zk.forRoot()]}),s})()}}]);