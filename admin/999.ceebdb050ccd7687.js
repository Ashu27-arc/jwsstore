"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[999],{2999:(J,d,r)=>{r.r(d),r.d(d,{StoreRequestModule:()=>U});var c=r(6895),p=r(9455),f=r(5439),t=r(4650),Z=r(7241),C=r(5830),u=r(4006),h=r(502),m=r(4333),g=r(388),_=r(8423);const q=["myModal"],T=["myModal2"];function y(o,a){1&o&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",33),t.qZA())}const b=function(){return[1,2,3,4,5,6,7,8,9,10]};function v(o,a){1&o&&(t.TgZ(0,"tr"),t.YNc(1,y,2,0,"td",13),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,b)))}function A(o,a){if(1&o){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",34),t.qZA(),t.TgZ(3,"td")(4,"label")(5,"span",35),t._uU(6),t.qZA(),t._UZ(7,"br"),t.qZA()(),t.TgZ(8,"td")(9,"label"),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"label"),t._uU(13),t.qZA()(),t.TgZ(14,"td")(15,"label"),t._uU(16),t.qZA()(),t.TgZ(17,"td")(18,"label"),t._uU(19),t.qZA()(),t.TgZ(20,"td")(21,"label"),t._uU(22),t.qZA()(),t.TgZ(23,"td")(24,"c-badge",36),t.NdJ("click",function(){const n=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.accept(n))}),t._uU(25),t.qZA(),t.TgZ(26,"c-badge",37),t.NdJ("click",function(){const n=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.reject(n))}),t._uU(27),t.qZA()()()}if(2&o){const i=a.$implicit,e=t.oxw();t.xp6(2),t.Q6J("src",e.api.imageUrl+i.cover,t.LSH),t.xp6(4),t.hij(" ",i.name,""),t.xp6(4),t.hij(" ",i.city_name," "),t.xp6(3),t.hij(" ",i.address," "),t.xp6(3),t.hij(" ",i.first_name+" "+i.last_name," "),t.xp6(3),t.AsE(" ",e.getTime(i.open_time)," - ",e.getTime(i.close_time)," "),t.xp6(3),t.hij(" ",i.country_code+i.mobile," "),t.xp6(3),t.hij(" ",e.util.translate("Accept")," "),t.xp6(2),t.hij(" ",e.util.translate("Reject")," ")}}function S(o,a){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",38),t.NdJ("pageChange",function(s){t.CHM(i);const n=t.oxw();return t.KtG(n.page=s)}),t.qZA()()}}const R=function(o){return{id:"pagin1",itemsPerPage:10,currentPage:o}},x=[{path:"",component:(()=>{class o{constructor(i,e){this.util=i,this.api=e,this.dummy=[],this.list=[],this.dummyList=[],this.page=1,this.appId="",this.message="",this.commision="",this.resetChanges=()=>{this.list=this.dummyList},this.ckeConfig={height:300,language:"en",allowedContent:!0,toolbar:[{name:"editing",items:["Scayt","Find","Replace","SelectAll"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["Maximize","ShowBlocks","Preview","Print","Templates"]},{name:"document",items:["Source"]},{name:"insert",items:["Image","Table","HorizontalRule","SpecialChar","Iframe","imageExplorer"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","CreateDiv","-","Blockquote"]},{name:"justify",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"styles",items:["Styles","Format","FontSize","-","TextColor","BGColor"]}]},this.getStores()}ngOnInit(){}getStores(){this.dummy=Array(5),this.list=[],this.dummyList=[],this.api.get_private("v1/store_request/getNewRequest").then(i=>{console.log(i),this.dummy=[],i&&i.status&&200==i.status&&i.data&&i.data.length&&(this.list=i.data,this.dummyList=i.data,console.log(Object.keys(this.list[0])))},i=>{console.log(i),this.dummy=[],this.util.apiErrorHandler(i)}).catch(i=>{console.log(i),this.dummy=[],this.util.apiErrorHandler(i)})}exportCSV(){let i=[];this.list.forEach(s=>{const n={id:this.util.replaceWithDot(s.id),name:this.util.replaceWithDot(s.name),owner:this.util.replaceWithDot(s.first_name)+" "+this.util.replaceWithDot(s.last_name),city_name:this.util.replaceWithDot(s.city_name),time:this.util.replaceWithDot(s.open_time)+"-"+this.util.replaceWithDot(s.close_time),address:this.util.replaceWithDot(s.address)};i.push(n)}),this.util.downloadFile(i,"stores",["id","name","owner","city_name","time","address"])}search(i){this.resetChanges(),console.log("string",i),this.list=this.filterItems(i)}filterItems(i){return this.list.filter(e=>e.name.toLowerCase().indexOf(i.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.list=[],this.list=this.dummyList}getTime(i){return f("1997-07-15 "+i).format("hh:mm A")}accept(i){console.log(i),this.appId=i.id,this.myModal2.show()}reject(i){console.log(i),console.log("update it"),this.appId=i.id,this.myModal.show()}onReject(){if(""==this.message||null==this.message)return this.util.error("Please enter message"),!1;const i={id:this.appId,subject:this.util.translate("Your application is rejected"),status:1,message:this.message};console.log(i),this.util.show(),this.api.post_private("v1/store_request/rejectRequest",i).then(e=>{console.log(e),this.util.hide(),e&&e.status&&200==e.status&&e.data&&(this.getStores(),this.message="",this.myModal.hide())},e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)}).catch(e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)})}onAccept(){if(""==this.commision||null==this.commision)return this.util.error("Please enter commision"),!1;const i={id:this.appId,subject:this.util.translate("Your application is accepted"),status:1,commision:this.commision};console.log(i),this.util.show(),this.api.post_private("v1/store_request/acceptRequest",i).then(e=>{console.log(e),this.util.hide(),e&&e.status&&200==e.status&&e.data&&(this.getStores(),this.commision="",this.myModal2.hide())},e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)}).catch(e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)})}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(Z.f),t.Y36(C.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-store-request"]],viewQuery:function(i,e){if(1&i&&(t.Gf(q,5),t.Gf(T,5)),2&i){let s;t.iGM(s=t.CRH())&&(e.myModal=s.first),t.iGM(s=t.CRH())&&(e.myModal2=s.first)}},decls:80,vars:31,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],[1,"col-lg-12"],["type","text","id","name",1,"form-control","form-control",3,"placeholder","input"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],["for","text-input",1,"col-form-label"],["type","text","rows","10","id","text-input","name","text-input",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["myModal2","bs-modal"],["type","number","id","text-input","name","text-input",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["animation","progress"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","40px","width","40px","object-fit","cover",3,"src"],[2,"font-size","14px"],["color","success",1,"me-1","badge","bg-success",3,"click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"]],template:function(i,e){if(1&i){const s=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return e.exportCSV()}),t._uU(9),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"input",11),t.NdJ("input",function(l){return e.search(l.target.value)}),t.qZA()()(),t.TgZ(14,"table",12)(15,"thead")(16,"tr")(17,"th"),t._uU(18),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.qZA()()(),t.TgZ(33,"tbody"),t.YNc(34,v,2,2,"tr",13),t.YNc(35,A,28,10,"tr",13),t.ALo(36,"paginate"),t.qZA()(),t.YNc(37,S,2,0,"div",14),t.qZA()()()()(),t.TgZ(38,"div",15,16)(40,"div",17)(41,"div",18)(42,"div",19)(43,"h5",20),t._uU(44),t.qZA(),t.TgZ(45,"button",21),t.NdJ("click",function(){t.CHM(s);const l=t.MAs(39);return t.KtG(l.hide())}),t.TgZ(46,"span",22),t._uU(47,"\xd7"),t.qZA()()(),t.TgZ(48,"div",23)(49,"div",24)(50,"div",25)(51,"label",26),t._uU(52),t.qZA(),t.TgZ(53,"textarea",27),t.NdJ("ngModelChange",function(l){return e.message=l}),t.qZA()()()(),t.TgZ(54,"div",28)(55,"button",29),t.NdJ("click",function(){t.CHM(s);const l=t.MAs(39);return t.KtG(l.hide())}),t._uU(56),t.qZA(),t.TgZ(57,"button",30),t.NdJ("click",function(){return e.onReject()}),t._uU(58),t.qZA()()()()(),t.TgZ(59,"div",15,31)(61,"div",17)(62,"div",18)(63,"div",19)(64,"h5",20),t._uU(65),t.qZA(),t.TgZ(66,"button",21),t.NdJ("click",function(){t.CHM(s);const l=t.MAs(60);return t.KtG(l.hide())}),t.TgZ(67,"span",22),t._uU(68,"\xd7"),t.qZA()()(),t.TgZ(69,"div",23)(70,"div",24)(71,"div",25)(72,"label",26),t._uU(73),t.qZA(),t.TgZ(74,"input",32),t.NdJ("ngModelChange",function(l){return e.commision=l}),t.qZA()()()(),t.TgZ(75,"div",28)(76,"button",29),t.NdJ("click",function(){t.CHM(s);const l=t.MAs(60);return t.KtG(l.hide())}),t._uU(77),t.qZA(),t.TgZ(78,"button",30),t.NdJ("click",function(){return e.onAccept()}),t._uU(79),t.qZA()()()()()}2&i&&(t.xp6(6),t.hij(" ",e.util.translate("Stores Request")," "),t.xp6(3),t.hij(" ",e.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",e.util.translate("Search Stores")),t.xp6(5),t.hij(" ",e.util.translate("Cover"),""),t.xp6(2),t.hij(" ",e.util.translate("Name"),""),t.xp6(2),t.hij(" ",e.util.translate("City")," "),t.xp6(2),t.hij(" ",e.util.translate("Address")," "),t.xp6(2),t.hij(" ",e.util.translate("Owner")," "),t.xp6(2),t.hij(" ",e.util.translate("Time")," "),t.xp6(2),t.hij(" ",e.util.translate("Mobile")," "),t.xp6(2),t.hij(" ",e.util.translate("Actions")," "),t.xp6(2),t.Q6J("ngForOf",e.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(36,26,e.list,t.VKq(29,R,e.page))),t.xp6(2),t.Q6J("ngIf",(null==e.list?null:e.list.length)>0),t.xp6(7),t.hij("",e.util.translate("Reject Application")," "),t.xp6(8),t.hij("",e.util.translate("Message")," "),t.xp6(1),t.Q6J("placeholder",e.util.translate("Message"))("ngModel",e.message),t.xp6(3),t.Oqu(e.util.translate("Close")),t.xp6(2),t.hij(" ",e.util.translate("Save Changes"),""),t.xp6(7),t.hij("",e.util.translate("Accept Application")," "),t.xp6(8),t.hij("",e.util.translate("Commission")," "),t.xp6(1),t.Q6J("placeholder",e.util.translate("Commission"))("ngModel",e.commision),t.xp6(3),t.Oqu(e.util.translate("Close")),t.xp6(2),t.hij(" ",e.util.translate("Save Changes"),""))},dependencies:[c.sg,c.O5,u.Fj,u.wV,u.JJ,u.On,h.xr,m.LS,g.oB,_.Ro,m._s],styles:['@charset "UTF-8";']}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(x),p.Bz]}),o})();var j=r(6442);let U=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,M,u.u5,h.hx,m.JX,g.zk.forRoot(),_.ef,j.dF]}),o})()}}]);