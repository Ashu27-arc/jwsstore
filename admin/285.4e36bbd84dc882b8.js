"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[285],{4949:(J,p,l)=>{l.r(p),l.d(p,{OrdersModule:()=>w});var d=l(6895),u=l(9455),t=l(4650),_=l(7241),f=l(5830),m=l(388),g=l(8423),h=l(502),c=l(4333);const Z=["myModal3"];function O(n,i){if(1&n&&(t.TgZ(0,"div",34)(1,"p"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.util.translate("No Data Found.."))}}function T(n,i){if(1&n&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.util.translate("Id")),t.xp6(2),t.Oqu(e.util.translate("Username")),t.xp6(2),t.Oqu(e.util.translate("Store")),t.xp6(2),t.Oqu(e.util.translate("Date")),t.xp6(2),t.Oqu(e.util.translate("Total")),t.xp6(2),t.Oqu(e.util.translate("Order To")),t.xp6(2),t.Oqu(e.util.translate("Action"))}}function C(n,i){1&n&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",35),t.qZA())}const v=function(){return[1,2,3,4,5]};function y(n,i){1&n&&(t.TgZ(0,"tr"),t.YNc(1,C,2,0,"td",16),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,v)))}function x(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=i.$implicit,o=i.index,r=t.oxw().$implicit;t.xp6(1),t.AsE(" ",e.name," ",o==r.storeInfo.length-1?"":",\xa0"," ")}}function b(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"label"),t.YNc(7,x,2,2,"span",16),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td")(15,"c-badge",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.viewsInfo(s.id))}),t._uU(16),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.hij(" ",e.id," "),t.xp6(2),t.AsE("",e.first_name," ",e.last_name,""),t.xp6(3),t.Q6J("ngForOf",e.storeInfo),t.xp6(2),t.Oqu(e.date_time),t.xp6(2),t.Oqu(e.grand_total),t.xp6(2),t.hij(" ",e.order_to," "),t.xp6(3),t.hij(" ",o.util.translate("View")," ")}}function A(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",37),t.NdJ("pageChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.page=r)}),t.qZA()()}}const q=function(n){return{id:"pagin1",itemsPerPage:20,currentPage:n}},U=[{path:"",component:(()=>{class n{constructor(e,o,r){this.util=e,this.api=o,this.router=r,this.dummy=Array(10),this.dummyOrders=[],this.orders=[],this.page=1,this.resetChanges=()=>{this.orders=this.dummyOrders},this.getOrders()}ngOnInit(){}getOrders(){this.api.get_private("v1/orders/getAll").then(e=>{this.dummy=[],e&&e.status&&200==e.status&&e.success&&(console.log(">>>>>",e),e&&e.data.length>0&&(this.orders=e.data,this.dummyOrders=e.data,console.log("======",this.orders)))},e=>{this.dummy=[],console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.dummy=[],console.log("Err",e),this.util.apiErrorHandler(e)})}getNames(e){return e.map(r=>r.name).join()}exportCSV(){let e=[];this.orders.forEach(r=>{const s={id:this.util.replaceWithDot(r.id),username:this.util.replaceWithDot(r.first_name)+" "+this.util.replaceWithDot(r.last_name),store:this.util.replaceWithDot(this.getNames(r.storeInfo)),date:this.util.replaceWithDot(r.date_time),total:this.util.replaceWithDot(r.grand_total),order_to:this.util.replaceWithDot(r.order_to),store_id:this.util.replaceWithDot(r.store_id)};e.push(s)}),this.util.downloadFile(e,"orders",["id","username","store","date","total","order_to","store_id"])}saveType(){this.myModal3.hide()}uploadCSV(e){console.log("fle",e),0!=e.length&&null!=e[0].type.match(/text\/*/)&&(e?(console.log("ok"),this.util.show(),this.api.uploaCSV(e,"v1/orders/importData").subscribe(r=>{console.log("==>>>>>>",r.data),this.util.hide(),this.myModal3.hide(),this.util.success("Uploaded"),this.getOrders()},r=>{console.log(r),this.util.hide(),this.util.apiErrorHandler(r)})):console.log("no"))}importCSV(){this.myModal3.show()}downloadSample(){window.open("assets/sample/orders.csv","_blank")}search(e){this.resetChanges(),console.log("string",e),""!=e&&(this.orders=this.filterItems(e))}filterItems(e){return this.orders.filter(o=>o.id==e)}setFilteredItems(){console.log("clear"),this.orders=[],this.orders=this.dummyOrders}viewsInfo(e){this.router.navigate(["order-details"],{queryParams:{id:e}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.f),t.Y36(f.s),t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-orders"]],viewQuery:function(e,o){if(1&e&&t.Gf(Z,5),2&e){let r;t.iGM(r=t.CRH())&&(o.myModal3=r.first)}},decls:47,vars:18,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-warning",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],[1,"col-lg-6"],["type","text","id","name",1,"form-control","form-control-lg",3,"placeholder","input"],["style","text-align: center;",4,"ngIf"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal3","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"form-group","row"],[1,"col-md-12"],["type","file","id","file-input","name","file-input","accept",".csv",3,"change"],["type","button",1,"btn","btn-warning",2,"float","right",3,"click"],[1,"fa","fa-cloud-download"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],[2,"text-align","center"],["count","1","appearance","line"],["color","info",1,"me-1","badge","bg-info",3,"click"],["id","pagin1",3,"pageChange"]],template:function(e,o){if(1&e){const r=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return o.importCSV()}),t._uU(9),t.qZA(),t._uU(10," \xa0 "),t.TgZ(11,"button",8),t.NdJ("click",function(){return o.exportCSV()}),t._uU(12),t.qZA()()(),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"input",12),t.NdJ("input",function(a){return o.search(a.target.value)}),t.qZA()()(),t.YNc(17,O,3,1,"div",13),t.TgZ(18,"table",14),t.YNc(19,T,16,7,"thead",15),t.TgZ(20,"tbody"),t.YNc(21,y,2,2,"tr",16),t.YNc(22,b,17,8,"tr",16),t.ALo(23,"paginate"),t.qZA()(),t.YNc(24,A,2,0,"div",15),t.qZA()()()()(),t.TgZ(25,"div",17,18)(27,"div",19)(28,"div",20)(29,"div",21)(30,"h5",22),t._uU(31),t.qZA(),t.TgZ(32,"button",23),t.NdJ("click",function(){t.CHM(r);const a=t.MAs(26);return t.KtG(a.hide())}),t.TgZ(33,"span",24),t._uU(34,"\xd7"),t.qZA()()(),t.TgZ(35,"div",25)(36,"div",26)(37,"div",27)(38,"input",28),t.NdJ("change",function(a){return o.uploadCSV(a.target.files)}),t.qZA()()(),t.TgZ(39,"button",29),t.NdJ("click",function(){return o.downloadSample()}),t._uU(40),t._UZ(41,"i",30),t.qZA()(),t.TgZ(42,"div",31)(43,"button",32),t.NdJ("click",function(){t.CHM(r);const a=t.MAs(26);return t.KtG(a.hide())}),t._uU(44),t.qZA(),t.TgZ(45,"button",33),t.NdJ("click",function(){return o.saveType()}),t._uU(46),t.qZA()()()()()}2&e&&(t.xp6(6),t.hij(" ",o.util.translate("All Orders")," "),t.xp6(3),t.hij(" ",o.util.translate("Bulk CSV Upload")," "),t.xp6(3),t.hij(" ",o.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",o.util.translate("Search Order By Id")),t.xp6(1),t.Q6J("ngIf",!(null!=o.orders&&o.orders.length)&&0==o.dummy.length),t.xp6(2),t.Q6J("ngIf",null==o.orders?null:o.orders.length),t.xp6(2),t.Q6J("ngForOf",o.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(23,13,o.orders,t.VKq(16,q,o.page))),t.xp6(2),t.Q6J("ngIf",(null==o.orders?null:o.orders.length)>0),t.xp6(7),t.hij("",o.util.translate("Bulk CSV Upload")," "),t.xp6(9),t.hij(" ",o.util.translate("Download Sample CSV")," \xa0 "),t.xp6(4),t.Oqu(o.util.translate("Close")),t.xp6(2),t.hij(" ",o.util.translate("Save Changes"),""))},dependencies:[d.sg,d.O5,m.oB,g.Ro,h.xr,c.LS,c._s],styles:['@charset "UTF-8";']}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild(U),u.Bz]}),n})();var k=l(4006);let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,M,m.zk.forRoot(),k.u5,g.ef,h.hx.forRoot({animation:"progress-dark"}),c.JX]}),n})()}}]);